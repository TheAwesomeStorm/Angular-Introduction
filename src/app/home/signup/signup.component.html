<h4 class="text-center mt-2 mb-2"> Register to embrace a new world!</h4>

<form #form="ngForm" [formGroup]='signupForm' class="form mt-4" (submit)='signUp()'>
  <div class="form-group gap-2 mb-3 d-grid col-6 mx-auto">
    <input #emailInput formControlName='email'  placeholder="email" class="form-control" autofocus >
    <app-message *ngIf='Validate("email","required") && (form.submitted  || signupForm.get("email")?.touched)' message='E-mail is required' ></app-message>
    <app-message *ngIf='Validate("email","email") && (form.submitted  || signupForm.get("email")?.touched)' message='Invalid e-mail' ></app-message>
  </div>

  <div class="form-group gap-2 mb-3 d-grid col-6 mx-auto">
    <input formControlName='fullName' placeholder="full name" class="form-control">
    <app-message
      *ngIf='Validate("fullName","required") && form.submitted'
      message='Full name is required' >
    </app-message>
    <app-message
      *ngIf='Validate("fullName","minlength") && form.submitted'
      message='Full name is too short, minimum length is 2' >
    </app-message>
    <app-message
      *ngIf='Validate("fullName","maxlength") && form.submitted'
      message='Full name is too long, maximum length is 40' >
    </app-message>
  </div>

  <div class="form-group gap-2 mb-3 d-grid col-6 mx-auto">
    <input formControlName='userName' placeholder="user name" class="form-control">
    <app-message
      *ngIf='Validate("userName","required") && form.submitted'
      message='User name is required' >
    </app-message>
    <app-message
      *ngIf='Validate("userName","minlength") && form.submitted'
      message='User name is too short, minimum length is 2' >
    </app-message>
    <app-message
      *ngIf='Validate("userName","maxlength") && form.submitted'
      message='User name is too long, maximum length is 30' >
    </app-message>
    <app-message
      *ngIf='Validate("userName","lowerCase") && form.submitted'
      message='User name should start with a lowercase letter' >
    </app-message>
    <app-message
      *ngIf='Validate("userName", "userNameTaken") && form.submitted' message='User name taken'>
    </app-message>
    <small *ngIf='signupForm.get("userName")?.valid' class='text-success'>User available</small>
  </div>

  <div class="form-group gap-2 mb-3 d-grid col-6 mx-auto">
    <input formControlName='password' type="password" placeholder="password" class="form-control">
    <app-message
      *ngIf='Validate("password","required") && form.submitted'
      message='Password is required' >
    </app-message>
    <app-message
      *ngIf='Validate("password","minlength") && form.submitted'
      message='Password is too short, minimum length is 8' >
    </app-message>
    <app-message
      *ngIf='Validate("password","maxlength") && form.submitted'
      message='Password is too long, maximum length is 14' >
    </app-message>
    <app-message *ngIf="ValidateCustomError('passwordNotSafe')" message="User and password must be different"></app-message>
  </div>

  <button class="btn btn-primary btn-block d-grid gap-2 col-3 mx-auto">Register</button>

  <p class="text-center mt-2">Already a user?<a class="ms-2" [routerLink]="['']">Sign In!</a></p>
</form>
